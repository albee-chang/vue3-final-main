import{S as c}from"./sweetalert2.all-2050e25f.js";import{_ as y,R as C,r as _,o as g,d as h,e as p,f as t,h as d,t as f,F as m,i as L,j as w,w as x}from"./index-67152561.js";import{P as $}from"./PaginationPage-65bdc74a.js";const{VITE_APP_URL:l,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"albee2022vue",BASE_URL:"/vue3-final-main/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{products:[],cart:{},title:"",pagination:{},currentPage:1,isLoading:!1}},components:{RouterLink:C,Pagination:$},methods:{addToCart(e,s=1){const i={product_id:e,qty:s};this.$http.post(`${l}/v2/api/${r}/cart`,{data:i}).then(n=>{this.getCartList(),c.fire(`${n.data.message}!`)}).catch(n=>{c.fire(`${n.data.message}`)})},getCartList(){this.$http.get(`${l}/v2/api/${r}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{c.fire(`${e.data.message}`)})},toCurrency(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getCategory(e,s=1){this.isLoading=!0,this.$http.get(`${l}/v2/api/${r}/products??page=${s}&category=${e}`).then(i=>{this.products=i.data.products,this.pages=i.data.pagination,this.title=`${e}`,this.isLoading=!1})},getProducts(e=1){this.isLoading=!0,this.$http.get(`${l}/v2/api/${r}/products/?page=${e}`).then(s=>{this.products=s.data.products,this.pagination=s.data.pagination,this.getCartList(),this.isLoading=!1,this.title="全部商品"}).catch(s=>{c.fire(`${s.data.message}`)})}},mounted(){this.getProducts(),this.getCartList()}},V={class:"row mt-4"},E={class:"col-2 navbar-nav p-3 mb-2 d-none d-lg-block"},T=t("li",null,[t("h5",{class:"text-primary fw-bold"},[t("i",{class:"bi bi-tags fs-5 me-2"}),d("分類 ")])],-1),R=t("hr",null,null,-1),A=t("hr",null,null,-1),S=t("hr",null,null,-1),B=t("hr",null,null,-1),I={class:"col-10 d-flex flex-column mt-2"},D={class:"container"},U={class:"row g-0 d-flex justify-content-center"},N={class:"fw-bold text-primary mt-2"},j=t("i",{class:"bi bi-arrow-down-right-square-fill fs-5"},null,-1),F=["src"],H={class:"card-body"},M={class:"card-title"},O={class:"float-end text-danger fw-bolder"},q={class:"card-body text-center"},z=["onClick"],G=t("i",{class:"bi bi-cart-check fs-5"},null,-1),J={class:"btn btn-success w-100",type:"button"},K=t("i",{class:"bi bi-info-circle fs-5"},null,-1);function Q(e,s,i,n,u,a){const b=_("VueLoading"),P=_("RouterLink"),v=_("Pagination");return g(),h(m,null,[p(b,{active:u.isLoading,"z-index":1060},null,8,["active"]),t("div",V,[t("ul",E,[T,R,t("button",{type:"button",class:"btn",onClick:s[0]||(s[0]=()=>a.getProducts())}," 全部商品 "),A,t("button",{type:"button",class:"btn",onClick:s[1]||(s[1]=()=>a.getCategory("觀葉植物"))}," 觀葉植物 "),S,t("button",{type:"button",class:"btn",onClick:s[2]||(s[2]=()=>a.getCategory("手作商品"))}," 手作商品 "),B,t("button",{type:"button",class:"btn",onClick:s[3]||(s[3]=()=>a.getCategory("養護材料"))}," 養護材料 ")]),t("div",I,[t("div",D,[t("div",U,[t("h5",N,[d(f(this.title)+" ",1),j]),(g(!0),h(m,null,L(u.products,o=>(g(),h("div",{class:"col-12 col-lg-2 col-md-3 card mb-2 me-2",key:o.id,"data-aos":"fade-up"},[t("img",{src:o.imageUrl,class:"card-img-top productImg w-100",alt:"productTitle"},null,8,F),t("div",H,[t("h6",M,f(o.title),1),t("span",O,"$ "+f(a.toCurrency(o.price))+" 元",1)]),t("div",q,[t("a",{href:"#",class:"btn btn-outline-primary w-100 mb-1",onClick:w(()=>a.addToCart(o.id),["prevent"])},[G,d(" 加入購物車")],8,z),t("button",J,[p(P,{to:`/product/${o.id}`,class:"text-white text-decoration-none"},{default:x(()=>[K,d(" 查看產品細節 ")]),_:2},1032,["to"])])])]))),128))])]),p(v,{class:"my-3",pages:u.pagination,onEmitPages:a.getProducts},null,8,["pages","onEmitPages"])])])],64)}const Z=y(k,[["render",Q]]);export{Z as default};
