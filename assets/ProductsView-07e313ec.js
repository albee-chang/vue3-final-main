import{S as u}from"./sweetalert2.all-3b6e6dca.js";import{_ as y,R as C,r as _,o as g,d as h,e as p,f as t,h as r,t as f,F as m,i as L,j as w,w as x}from"./index-4d33b71f.js";import{P as $}from"./PaginationPage-dd2e05c0.js";const{VITE_APP_URL:c,VITE_APP_PATH:l}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"albee2022vue",BASE_URL:"/vue3-final-main/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{products:[],cart:{},title:"",pagination:{},currentPage:1,isLoading:!1}},components:{RouterLink:C,Pagination:$},methods:{addToCart(e,s=1){const i={product_id:e,qty:s};this.$http.post(`${c}/v2/api/${l}/cart`,{data:i}).then(n=>{this.getCartList(),u.fire(`${n.data.message}!`)}).catch(n=>{u.fire(`${n.data.message}`)})},getCartList(){this.$http.get(`${c}/v2/api/${l}/cart`).then(e=>{this.cart=e.data.data})},toCurrency(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getCategory(e,s=1){this.isLoading=!0,this.$http.get(`${c}/v2/api/${l}/products??page=${s}&category=${e}`).then(i=>{this.products=i.data.products,this.pages=i.data.pagination,this.title=`${e}`,this.isLoading=!1})},getProducts(e=1){this.isLoading=!0,this.$http.get(`${c}/v2/api/${l}/products/?page=${e}`).then(s=>{this.products=s.data.products,this.pagination=s.data.pagination,this.getCartList(),this.isLoading=!1,this.title="全部商品"}).catch(s=>{u.fire(`${s.data.message}`)})}},mounted(){this.getProducts()}},V={class:"row mt-4"},E={class:"col-2 navbar-nav p-3 mb-2 d-none d-lg-block"},T=t("li",null,[t("h5",{class:"text-primary fw-bold"},[t("i",{class:"bi bi-tags fs-5 me-2"}),r("分類 ")])],-1),R=t("hr",null,null,-1),A=t("hr",null,null,-1),S=t("hr",null,null,-1),B=t("hr",null,null,-1),I={class:"col-10 d-flex flex-column mt-2"},D={class:"container"},U={class:"row g-0 d-flex justify-content-center"},N={class:"fw-bold text-primary mt-2"},j=t("i",{class:"bi bi-arrow-down-right-square-fill fs-5"},null,-1),F=["src"],H={class:"card-body"},M={class:"card-title"},O={class:"float-end text-danger fw-bolder"},q={class:"card-body text-center"},z=["onClick"],G=t("i",{class:"bi bi-cart-check fs-5"},null,-1),J={class:"btn btn-success w-100",type:"button"},K=t("i",{class:"bi bi-info-circle fs-5"},null,-1);function Q(e,s,i,n,d,o){const b=_("VueLoading"),P=_("RouterLink"),v=_("Pagination");return g(),h(m,null,[p(b,{active:d.isLoading,"z-index":1060},null,8,["active"]),t("div",V,[t("ul",E,[T,R,t("button",{type:"button",class:"btn",onClick:s[0]||(s[0]=()=>o.getProducts())}," 全部商品 "),A,t("button",{type:"button",class:"btn",onClick:s[1]||(s[1]=()=>o.getCategory("觀葉植物"))}," 觀葉植物 "),S,t("button",{type:"button",class:"btn",onClick:s[2]||(s[2]=()=>o.getCategory("手作商品"))}," 手作商品 "),B,t("button",{type:"button",class:"btn",onClick:s[3]||(s[3]=()=>o.getCategory("養護材料"))}," 養護材料 ")]),t("div",I,[t("div",D,[t("div",U,[t("h5",N,[r(f(this.title)+" ",1),j]),(g(!0),h(m,null,L(d.products,a=>(g(),h("div",{class:"col-12 col-lg-2 col-md-3 card mb-2 me-2",key:a.id,"data-aos":"fade-up"},[t("img",{src:a.imageUrl,class:"card-img-top productImg w-100",alt:"productTitle"},null,8,F),t("div",H,[t("h6",M,f(a.title),1),t("span",O,"$ "+f(o.toCurrency(a.price))+" 元",1)]),t("div",q,[t("a",{href:"#",class:"btn btn-outline-primary w-100 mb-1",onClick:w(()=>o.addToCart(a.id),["prevent"])},[G,r(" 加入購物車")],8,z),t("button",J,[p(P,{to:`/product/${a.id}`,class:"text-white text-decoration-none"},{default:x(()=>[K,r(" 查看產品細節 ")]),_:2},1032,["to"])])])]))),128))])]),p(v,{class:"my-3",pages:d.pagination,onEmitPages:o.getProducts},null,8,["pages","onEmitPages"])])])],64)}const Z=y(k,[["render",Q]]);export{Z as default};
