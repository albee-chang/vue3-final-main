import{S as x}from"./sweetalert2.all-7f1b4648.js";import{_ as v,R as f,r as C,o as a,d as i,f as t,F as b,i as m,t as o,e as y,w as g,h as c,p as w,v as k}from"./index-fc8a2df5.js";const{VITE_APP_URL:d,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"albee2022vue",BASE_URL:"/vue3-final-main/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},$={data(){return{products:[],productId:"",cart:{},loadingItem:""}},components:{RouterLink:f},methods:{getCartList(){this.$http.get(`${d}/v2/api/${u}/cart`).then(e=>{this.cart=e.data.data})},updateCart(e){const n={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${d}/v2/api/${u}/cart/${e.id}`,{data:n}).then(()=>{this.getCartList(),this.loadingItem=""}).catch(p=>{console.log(p)})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${d}/v2/api/${u}/cart/${e.id}`).then(()=>{this.getCartList(),this.loadingItem=""}).catch(n=>{console.log(n)})},deleteAllCart(){this.$http.delete(`${d}/v2/api/${u}/carts`).then(()=>{this.getCartList(),x.fire("購物車已清空"),this.$router.push("/")}).catch(e=>{console.log(e)})}},mounted(){this.getCartList()}},I={key:0,class:"mx-5 my-5 row justify-content-center"},L=t("div",{class:"my-2 text-primary"},[t("i",{class:"bi bi-arrow-right-circle-fill fs-6"}),c(" 購物車內容 ")],-1),P=t("div",{style:{width:"60vw"},class:"my-5"},[t("div",{class:"position-relative m-4"},[t("div",{class:"progress",style:{height:"1px"}},[t("div",{class:"progress-bar",role:"progressbar",style:{width:"0%"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"bi bi-bag-check-fill fs-5"})]),t("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"bi bi-card-checklist fs-5"})]),t("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"bi bi-box2-heart-fill fs-5"})])])],-1),V={class:"text-end mt-5"},A={class:"table align-middle"},R=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th")])],-1),E=["onClick"],S=t("div",{class:"text-success"},"已套用優惠券",-1),T={class:"input-group input-group-sm"},D={class:"input-group"},U=["onUpdate:modelValue","onChange"],q=["value"],B={class:"input-group-text",id:"basic-addon2"},N={class:"text-end"},j=t("small",{class:"text-success"},"折扣價：",-1),F=t("td",null,null,-1),H=t("td",{colspan:"3",class:"text-end"},"總計",-1),M={class:"text-end"},O=t("td",null,null,-1),z=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),G={class:"text-end text-success"},J={class:"text-end my-5"},K={class:"btn btn-primary",type:"button"},Q={key:1,class:"mx-5 my-5 row d-flex justify-content-center align-items-center"},W=t("div",{class:"mt-5 text-center text-primary h1 fw-bold"},"購物車內無商品",-1),X={class:"mt-5 text-center text-primary h3 fw-bold"};function Y(e,n,p,Z,r,h){const _=C("RouterLink");return r.cart.carts?(a(),i("div",Q,[W,t("div",X,[y(_,{to:"/",class:"btn text-primary text-decoration-none"},{default:g(()=>[c("回到首頁")]),_:1})])])):(a(),i("div",I,[L,P,t("div",V,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:n[0]||(n[0]=()=>h.deleteAllCart())}," 清空購物車 ")]),t("table",A,[R,t("tbody",null,[t("template",null,[(a(!0),i(b,null,m(r.cart.carts,s=>(a(),i("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:()=>h.deleteCartItem(s)}," x ",8,E)]),t("td",null,[c(o(s.product.title)+" ",1),S]),t("td",null,[t("div",T,[t("div",D,[w(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":l=>s.qty=l,onChange:l=>h.updateCart(s)},[(a(),i(b,null,m(10,l=>t("option",{value:l,key:l+"inCart"},o(l),9,q)),64))],40,U),[[k,s.qty]]),t("span",B,o(s.product.unit),1)])])]),t("td",null,[t("span",null,o(s.product.price),1)]),t("td",N,[j,c(" "+o(s.total),1)])]))),128))])]),t("tfoot",null,[t("tr",null,[F,H,t("td",M,o(r.cart.total),1)]),t("tr",null,[O,z,t("td",G,o(r.cart.final_total),1)])])]),t("div",J,[t("button",K,[y(_,{to:"/charge",class:"text-white text-decoration-none"},{default:g(()=>[c("付款結帳")]),_:1})])])]))}const st=v($,[["render",Y]]);export{st as default};
