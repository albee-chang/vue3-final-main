import{S as u}from"./sweetalert2.all-61932d1b.js";import{_ as y,R as C,r as _,o as h,d as g,e as p,f as t,h as l,t as b,F as f,i as L,j as w,w as x}from"./index-8a41e741.js";import{P as $}from"./PaginationPage-1a1e89b9.js";const{VITE_APP_URL:c,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"albee2022vue",BASE_URL:"/production-sub-path/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{products:[],cart:{},title:"",pagination:{},currentPage:1,isLoading:!1}},components:{RouterLink:C,Pagination:$},methods:{addToCart(e,s=1){const i={product_id:e,qty:s};this.$http.post(`${c}/v2/api/${r}/cart`,{data:i}).then(n=>{this.getCartList(),u.fire(`${n.data.message}!`)}).catch(n=>{u.fire(`${n.data.message}`)})},getCartList(){this.$http.get(`${c}/v2/api/${r}/cart`).then(e=>{this.cart=e.data.data})},toCurrency(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getCategory(e,s=1){this.isLoading=!0,this.$http.get(`${c}/v2/api/${r}/products??page=${s}&category=${e}`).then(i=>{this.products=i.data.products,this.pages=i.data.pagination,this.title=`${e}`,this.isLoading=!1})},getProducts(e=1){this.isLoading=!0,this.$http.get(`${c}/v2/api/${r}/products/?page=${e}`).then(s=>{this.products=s.data.products,this.pagination=s.data.pagination,this.getCartList(),this.isLoading=!1,this.title="全部商品"}).catch(s=>{u.fire(`${s.data.message}`)})}},mounted(){this.getProducts()}},V={class:"row"},E={class:"col-2 navbar-nav p-3 mb-2 d-none d-lg-block"},T=t("li",null,[t("h5",{class:"text-primary fw-bold"},[t("i",{class:"bi bi-tags fs-5 me-2"}),l("分類 ")])],-1),R=t("hr",null,null,-1),A=t("hr",null,null,-1),S=t("hr",null,null,-1),B=t("hr",null,null,-1),I={class:"col-10 d-flex flex-column mt-2"},D={class:"container"},U={class:"row g-0"},N={class:"fw-bold text-primary mt-2"},F=t("i",{class:"bi bi-arrow-down-right-square-fill fs-5"},null,-1),H=["src"],M={class:"card-body"},O={class:"card-title"},j={class:"float-end text-danger fw-bolder"},q={class:"card-body text-center"},z=["onClick"],G=t("i",{class:"bi bi-cart-check fs-5"},null,-1),J={class:"btn btn-success w-100",type:"button"},K=t("i",{class:"bi bi-info-circle fs-5"},null,-1);function Q(e,s,i,n,d,o){const m=_("VueLoading"),P=_("RouterLink"),v=_("Pagination");return h(),g(f,null,[p(m,{active:d.isLoading,"z-index":1060},null,8,["active"]),t("div",V,[t("ul",E,[T,R,t("button",{type:"button",class:"btn",onClick:s[0]||(s[0]=()=>o.getProducts())}," 全部商品 "),A,t("button",{type:"button",class:"btn",onClick:s[1]||(s[1]=()=>o.getCategory("觀葉植物"))}," 觀葉植物 "),S,t("button",{type:"button",class:"btn",onClick:s[2]||(s[2]=()=>o.getCategory("手作商品"))}," 手作商品 "),B,t("button",{type:"button",class:"btn",onClick:s[3]||(s[3]=()=>o.getCategory("養護材料"))}," 養護材料 ")]),t("div",I,[t("div",D,[t("div",U,[t("h5",N,[l(b(this.title)+" ",1),F]),(h(!0),g(f,null,L(d.products,a=>(h(),g("div",{class:"col-12 col-md-3 card mb-2 me-2",key:a.id,"data-aos":"fade-up"},[t("img",{src:a.imageUrl,class:"card-img-top productImg w-100",alt:"productTitle"},null,8,H),t("div",M,[t("h6",O,b(a.title),1),t("span",j,"$ "+b(o.toCurrency(a.price))+" 元",1)]),t("div",q,[t("a",{href:"#",class:"btn btn-outline-primary w-100 mb-1",onClick:w(()=>o.addToCart(a.id),["prevent"])},[G,l(" 加入購物車")],8,z),t("button",J,[p(P,{to:`/product/${a.id}`,class:"text-white text-decoration-none"},{default:x(()=>[K,l(" 查看產品細節 ")]),_:2},1032,["to"])])])]))),128))])])])]),p(v,{pages:d.pagination,onEmitPages:o.getProducts},null,8,["pages","onEmitPages"])],64)}const Z=y(k,[["render",Q]]);export{Z as default};
